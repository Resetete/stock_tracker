<div class="results-block">
  <%= render 'layouts/messages' %>
</div>

<% if @friends %>
  <div class="mb-3">
  <% @friends.to_a.each do |friend| %>
      <div class="card card-header col-sm-7">
        <div class="results-block">
          <strong>Name:</strong> <%= friend.full_name %>
          <% if current_user.can_track_friend?(friend.first_name, friend.last_name) %>
            <%= link_to 'View profile', '#', class: "btn btn-success ml-3", method: :post %>
            <%= link_to 'Add to friends', friendships_path(user: current_user, friend: friend), class: "btn btn-success ml-3", method: :post %>
          <% else %>
          <span class="badge badge-secondary ml-3">
            You are already tracking
            <% if !current_user.under_friend_limit? %>
            10 friends
            <% else !current_user.friend_already_tracked?(friend.first_name, friend.last_name) %>
            this friend
            <% end %>
          </span>
          <% end %>
        </div>
      </div>
  <% end %>
  </div>
<% end %>
